var mfoOverlay={},mfoPjax,mfoDialog,mfoPjaxDialog,mvcForms;(function(){function n(n,t){var f=i()+500,r=$('<div class="mfo-overlay"><\/div>').css({opacity:"0",margin:"0",border:"0",position:"fixed",top:0,left:0,width:"100%",height:"100%","z-index":f}).fadeTo(n||100,0).fadeTo(t||1500,.2).appendTo("body"),u=[];return $("input, select, textarea, button, a, area").each(function(){var n=$(this),t=n.prop("disabled"),i=n.prop("tabIndex");u.push(function(){t!==undefined&&n.prop("disabled",t);i?n.prop("tabindex",i):n.removeProp("tabindex")});t===!1&&n.prop("disabled",!0);n.prop("tabindex",-1)}),r.undisableActions=u,r}function t(n){for(var t=0;t<n.undisableActions.length;t++)n.undisableActions[t]();n.stop(!0).fadeTo(50,0,function(){n.remove()})}function i(){return Math.max.apply(null,$.map($("body *"),function(n){if($(n).css("position")!=="static")return parseInt($(n).css("z-index"))||1}).concat(500))}mfoOverlay.add=n;mfoOverlay.remove=t})();mfoPjax={},function(){function e(){$(document).on("click","[data-pjax] a",s);$(document).on("submit","[data-pjax] form",h);$(window).on("popstate",l);$(document).on("click","input[type=submit], button",o)}function o(t){n&&n.removeAttr("clicked");n=$(t.currentTarget);n.attr("clicked","true")}function s(n){var f=$(n.currentTarget),e,u,o;f.attr("data-nopjax")||(e=i(f),u=f.attr("href"),u&&u.substr(0,1)!=="#")&&u.toLowerCase().substr(0,7)!=="http://"&&u.toLowerCase().substr(0,8)!=="https://"&&(o={anchor:f,url:u,verb:"GET",container:e},e.trigger("pjax:navigate",o),o.cancel!==!0)&&(r(e),mfoPjax.load(o,t),n.preventDefault())}function h(n){var u=$(n.currentTarget),f=u.find("*[clicked=true]"),e,s,h,o;f.attr("data-nopjax")||(e=i(u),s=u.serialize(),f.length>0&&(h=f.attr("name"),h&&(s+="&"+h+"="+(f.attr("value")||""))),o={form:u,url:u.attr("action")||location.pathname+location.search+location.hash,data:s,verb:u.attr("method")||"POST",container:e},e.trigger("pjax:submitform",o),o.cancel!==!0)&&(r(e),mfoPjax.load(o,t),n.preventDefault())}function i(n){var t=n.closest("[data-pjax]");return t.attr("id")||t.attr("id","pjax_"+(new Date).valueOf()),t}function r(n){if(history.state===null||history.state.containerId!==n.attr("id")||!history.state.navigatedFromPjax){var t=history.state||{};t.url=location.pathname+location.search+location.hash;t.containerId=n.attr("id");t.navigatedFromPjax=!0;history.replaceState(t,null,"")}}function c(){var n=history.state;n&&n.navigatedFromPjax&&(delete n.navigatedFromPjax,history.replaceState(n,"",null))}function l(n){var t=n.originalEvent.state,i,r;if(t!==null&&t.containerId&&t.navigatedFromPjax){if(i=$("#"+t.containerId),i.length===0){location.reload();return}r={verb:"GET",url:t.url,container:i};mfoPjax.load(r,function(n,t){u(n,t)})}}function a(n,t,i,r,u){return n.responseText?(u(r,n.responseText,t,n),!0):!1}function t(n,t,i,r){if(u(n,t),n.noPushState!==!0){var f=v(r.getResponseHeader("X-PJAX-URL")||n.url);f!==location.href&&history.pushState({url:f,containerId:n.container.attr("id"),navigatedFromPjax:!0},null,f)}}function v(n){return n.replace(/([?&])(_pjax|_)=[^&]*/g,"")}function u(n,t){var o=t.substr(0,100),i,r,u,f,e,s,h;(o.indexOf("<html")>=0||o.indexOf("<HTML")>=0)&&(i=Math.max(t.indexOf("<body"),t.indexOf("<BODY")),i>=0&&(t=t.substr(i+5),r=t.indexOf(">"),r>=0&&(t=t.substr(r+1))),u=Math.max(t.indexOf("body>"),t.indexOf("BODY>")),u>=0&&(t=t.substr(0,u),f=t.lastIndexOf("<\/"),f>=0&&(t=t.substr(0,f))),t=t.replace(/<script/g,"script_tag_disabled_pjax_error: "),t=t.replace(/<SCRIPT/g,"SCRIPT_TAG_DISABLED_PJAX_ERROR: "),t='<div data-title="Error - Attempt to load non-PJAX page into container"><h1 style="background:white; color: red">Error - Attempt to load non-PJAX page into container<\/h1><div>'+t+"<\/div><\/div>");e=n.container;e.html(t);n.noPushState!==!0&&(s=e.children(":first"),h=s.attr("data-title"),document.title=h)}function f(n,i){i=i||t;var r=mfoOverlay.add().css("cursor","wait"),u={"X-PJAX":"true","X-PJAX-URL":n.url};$.extend(u,n.headers);$.ajax({headers:u,cache:!1,type:n.verb,url:n.url,data:n.data,timeout:29e3,dataType:"html",success:function(t,u,f){mfoOverlay.remove(r);i(n,t,u,f);n.container?n.container.trigger("pjax:loaded",n):console.warn("context.container not set in pjax:load (cannot raise pjax:loaded event)")},error:function(t,u,f){mfoOverlay.remove(r);mfoPjax.onError(t,u,f,n,i)}})}function y(n){var t=n.container.attr("data-pjax");t==="true"&&(t=location.pathname+location.search+location.hash);n.url=t;n.verb="GET";n.noPushState=!0;f(n)}mfoPjax.init=e;mfoPjax.onError=a;mfoPjax.load=f;mfoPjax.reload=y;mfoPjax.onBeforeNonPjaxPushState=c;var n=null}();mfoDialog={},function(){function l(){$(document).on("click","[data-close-dialog]",y);$(window).on("popstate",v);$(document).on("keyup",a);$(window).on("resize",o);o()}function o(){f=$(window).height()-i;r=$(window).width()-i;h()}function a(t){n()>0&&t.keyCode===27&&history.back()}function v(){if(history.state&&history.state.dialogCount!==undefined){var t=history.state.dialogCount;t<n()?k(u):t>n()&&history.back()}}function y(n){var t=$(n.currentTarget),i=t.attr("data-close-dialog");u=JSON.parse(i);history.back();n.preventDefault()}function p(n){u=n;history.back()}function s(){history.state&&history.state.dialogCount>0&&(history.back(),setTimeout(s,1))}function n(){return t.length}function w(){return n()===0?$("body"):t[t.length-1]}function b(i,r){var u=n(),f,s,y,c,l,p;u===0&&(f=$("body"),e=f.css("overflow"),f.css("overflow","hidden"));var a=mfoOverlay.add(1,100),w=parseInt(a.css("z-index"))+500,v=$("<div><\/div>").css({margin:"0",border:"0",position:"fixed",top:0,left:0,width:"100%",height:"100%","z-index":w}).appendTo("body"),o=$('<div class="mfo-dialog"><\/div>').css({margin:"auto",position:"absolute",left:"0",right:"0",top:"50%",transform:"translateY(-50%)",overflow:"auto"}).appendTo(v);return o.html(i),s={dialog:o,container:v,previousTitle:document.title,callback:r,overlay:a},t.push(s),h(),y=o.children(":first"),c=y.attr("data-title"),c&&(document.title=document.title+" - "+c),history.state!==null&&history.dialogCount||(l=history.state||{},l.dialogCount=u,history.replaceState(l,null,"")),mfoPjax.onBeforeNonPjaxPushState(),p=location.pathname+location.search+location.hash,history.pushState({dialogCount:u+1},null,p),s}function k(i){if(n()!==0){var r=t.pop();r.dialog.remove();r.container.remove();mfoOverlay.remove(r.overlay);document.title=r.previousTitle;n()===0&&$("body").css("overflow",e);r.callback&&r.callback(i)}}function h(){for(var o=c+i,u=0;u<t.length;u++){var s=t[u],n=s.dialog,h=n.children(":first"),e=h.attr("data-modal-width"),l=o-i;e||(e=l);n.width(e);n.css("max-height",f+"px");n.width()>r&&n.width(r);o=n.width()}}mfoDialog.init=l;mfoDialog.showModal=b;mfoDialog.dialogCount=n;mfoDialog.topDialog=w;mfoDialog.closeDialog=p;s();var c=780,i=10,f,r,e,t=[],u}();mfoPjaxDialog={},function(){function n(){$(document).on("click","[data-modal-dialog]",r);$(document).on("pjax:navigate",t);$(document).on("pjax:submitform",i)}function t(n,t){var i=t.anchor,r=i.attr("data-close-dialog"),u=i.attr("data-modal-dialog");(r||u)&&(t.cancel=!0)}function i(n,t){var i=t.form,r=i.closest(".mfo-dialog");r.length!==0&&(t.headers={"X-PJAX-MODAL":"true"},t.noPushState=!0)}function r(n){var t=$(n.currentTarget),i=t.closest("[data-pjax]"),r=t.attr("href"),f={url:r,verb:"GET",headers:{"X-PJAX-MODAL":"true"}};mfoPjax.load(f,function(n,t){u(n,t,i)});n.preventDefault()}function u(n,t,i){var u=mfoDialog.showModal(t,function(n){f(n,i)}),r=u.dialog;r.attr("data-pjax",n.url);n.container=r}function f(n,t){if(n)if(t.length===0)location.reload(!0);else{var i={container:t};mfoDialog.dialogCount()!==0&&(i.headers={"X-PJAX-MODAL":"true"});mfoPjax.reload(i)}}mfoPjaxDialog.init=n}();mvcForms={},function(){function n(){mfoPjax.init();mfoDialog.init();mfoPjaxDialog.init()}mvcForms.init=n}()
//# sourceMappingURL=mvcForms.min.map
