var mfoOverlay={},mfoPjax,mfoDialog,mfoPjaxDialog,mvcForms;(function(){function n(n,t){var i=$('<div class="mfo-overlay"><\/div>').css({opacity:"0",margin:"0",border:"0",position:"fixed",top:0,left:0,width:"100%",height:"100%","z-index":1e4}).fadeTo(n||100,0).fadeTo(t||1500,.2).appendTo("body"),r=[];return $("input, select, textarea, button, a, area").each(function(){var n=$(this),t=n.prop("disabled"),i=n.prop("tabIndex");r.push(function(){t!==undefined&&n.prop("disabled",t);i?n.prop("tabindex",i):n.removeProp("tabindex")});t===!1&&n.prop("disabled",!0);n.prop("tabindex",-1)}),i.undisableActions=r,i}function t(n){for(var t=0;t<n.undisableActions.length;t++)n.undisableActions[t]();n.stop(!0).fadeTo(50,0,function(){n.remove()})}mfoOverlay.add=n;mfoOverlay.remove=t})();mfoPjax={},function(){function u(){$(document).on("click","[data-pjax] a",e);$(document).on("submit","[data-pjax] form",o);$(window).on("popstate",s);$(document).on("click","input[type=submit], button",f)}function f(t){n&&n.removeAttr("clicked");n=$(t.currentTarget);n.attr("clicked","true")}function e(n){var u=$(n.currentTarget),i,r,f,e;u.attr("data-nopjax")||(i=u.closest("[data-pjax]"),r=u.attr("href"),r&&r.substr(0,1)!=="#")&&(i.attr("id")||i.attr("id","pjax_"+(new Date).valueOf()),r.toLowerCase().substr(0,7)!=="http://"&&r.toLowerCase().substr(0,8)!=="https://")&&(f={anchor:u,url:r,verb:"GET",container:i},i.trigger("pjax:navigate",f),f.cancel!==!0)&&((history.state===null||history.state.containerId!==i.attr("id"))&&(e=history.state||{},e.url=location.pathname+location.search+location.hash,e.containerId=i.attr("id"),history.replaceState(e,null,"")),mfoPjax.load(f,t),n.preventDefault())}function o(n){var i=$(n.currentTarget),r=i.find("*[clicked=true]"),f,e,u;r.attr("data-nopjax")||(f=i.closest("[data-pjax]"),e=i.serialize(),r.length>0&&(e+="&"+r.attr("name")+"="+r.attr("value")),u={form:i,url:i.attr("action")||location.pathname+location.search+location.hash,data:e,verb:i.attr("method")||"POST",container:f},f.trigger("pjax:submitform",u),u.cancel!==!0)&&(mfoPjax.load(u,t),n.preventDefault())}function s(n){var t=n.originalEvent.state,r,u;if(t!==null&&t.containerId){if(r=$("#"+t.containerId),r.length===0){location.reload();return}u={verb:"GET",url:t.url,container:r};mfoPjax.load(u,function(n,t){i(n,t)})}}function h(n,t,i,r,u){return n.responseText?(u(r,n.responseText,t,n),!0):!1}function t(n,t,r,u){if(i(n,t),n.noPushState!==!0){var f=c(u.getResponseHeader("X-PJAX-URL")||n.url);f!==location.href&&history.pushState({url:f,containerId:n.container.attr("id")},null,f)}}function c(n){return n.replace(/([?&])(_pjax|_)=[^&]*/g,"")}function i(n,t){var i=n.container,r,u;i.html(t);n.noPushState!==!0&&(r=i.children(":first"),u=r.attr("data-title"),document.title=u)}function r(n,i){i=i||t;var r=mfoOverlay.add().css("cursor","wait"),u={"X-PJAX":"true","X-PJAX-URL":n.url};$.extend(u,n.headers);$.ajax({headers:u,cache:!1,type:n.verb,url:n.url,data:n.data,timeout:29e3,dataType:"html",success:function(t,u,f){mfoOverlay.remove(r);i(n,t,u,f)},error:function(t,u,f){mfoOverlay.remove(r);mfoPjax.onError(t,u,f,n,i)}})}function l(n){n.url=n.container.attr("data-pjax");n.verb="GET";n.noPushState=!0;r(n)}mfoPjax.init=u;mfoPjax.onError=h;mfoPjax.load=r;mfoPjax.reload=l;var n=null}();mfoDialog={},function(){function l(){$(document).on("click","[data-close-dialog]",y);$(window).on("popstate",v);$(document).on("keyup",a);$(window).on("resize",o);o()}function o(){f=$(window).height()-i;r=$(window).width()-i;h()}function a(t){n()>0&&t.keyCode===27&&history.back()}function v(){if(history.state&&history.state.dialogCount!==undefined){var t=history.state.dialogCount;t<n()?k(u):t>n()&&history.back()}}function y(n){var t=$(n.currentTarget),i=t.attr("data-close-dialog");u=JSON.parse(i);history.back();n.preventDefault()}function p(n){u=n;history.back()}function s(){history.state&&history.state.dialogCount>0&&(history.back(),setTimeout(s,1))}function n(){return t.length}function w(){return n()===0?$("body"):t[t.length-1]}function b(i,r){var u=n(),f,s,v,c,l,y;u===0&&(f=$("body"),e=f.css("overflow"),f.css("overflow","hidden"));var p=mfoOverlay.add(1,100).css("z-index",1e4+u*1e3),a=$("<div><\/div>").css({margin:"0",border:"0",position:"fixed",top:0,left:0,width:"100%",height:"100%","z-index":10500+u*1e3}).appendTo("body"),o=$('<div class="mfo-dialog"><\/div>').css({margin:"auto",position:"absolute",left:"0",right:"0",top:"50%",transform:"translateY(-50%)",overflow:"auto"}).appendTo(a);return o.html(i),s={dialog:o,container:a,previousTitle:document.title,callback:r,overlay:p},t.push(s),h(),v=o.children(":first"),c=v.attr("data-title"),c&&(document.title=document.title+" - "+c),history.state!==null&&history.dialogCount||(l=history.state||{},l.dialogCount=u,history.replaceState(l,null,"")),y=location.pathname+location.search+location.hash,history.pushState({dialogCount:u+1},null,y),s}function k(i){if(n()!==0){var r=t.pop();r.dialog.remove();r.container.remove();mfoOverlay.remove(r.overlay);document.title=r.previousTitle;n()===0&&$("body").css("overflow",e);r.callback&&r.callback(i)}}function h(){for(var o=c+i,u=0;u<t.length;u++){var s=t[u],n=s.dialog,h=n.children(":first"),e=h.attr("data-modal-width"),l=o-i;e||(e=l);n.width(e);n.css("max-height",f+"px");n.width()>r&&n.width(r);o=n.width()}}mfoDialog.init=l;mfoDialog.showModal=b;mfoDialog.dialogCount=n;mfoDialog.topDialog=w;mfoDialog.closeDialog=p;s();var c=700,i=10,f,r,e,t=[],u}();mfoPjaxDialog={},function(){function n(){$(document).on("click","[data-modal-dialog]",r);$(document).on("pjax:navigate",t);$(document).on("pjax:submitform",i)}function t(n,t){var i=t.anchor,r=i.attr("data-close-dialog"),u=i.attr("data-modal-dialog");(r||u)&&(t.cancel=!0)}function i(n,t){var i=t.form,r=i.closest(".mfo-dialog");r.length!==0&&(t.headers={"X-PJAX-MODAL":"true"},t.noPushState=!0)}function r(n){var t=$(n.currentTarget),i=t.closest("[data-pjax]"),r=t.attr("href"),f={url:r,verb:"GET",headers:{"X-PJAX-MODAL":"true"}};mfoPjax.load(f,function(n,t){u(n,t,i)});n.preventDefault()}function u(n,t,i){var r=mfoDialog.showModal(t,function(n){f(n,i)}),u=r.dialog;u.attr("data-pjax",n.url)}function f(n,t){if(n)if(t.length===0)location.reload(!0);else{var i={container:t,headers:{"X-PJAX-MODAL":"true"}};mfoPjax.reload(i)}}mfoPjaxDialog.init=n}();mvcForms={},function(){function n(){mfoPjax.init();mfoDialog.init();mfoPjaxDialog.init()}mvcForms.init=n}()
//# sourceMappingURL=mvcForms.min.map
