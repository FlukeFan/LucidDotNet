<?xml version="1.0" encoding="utf-8" ?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      autoReload="true"
      throwConfigExceptions="true"
      internalLogLevel="Warn"
      internalLogFile="..\logs\mvc.internal.log">

  <variable name="smtpServer" value="127.0.0.1" />
  <variable name="smtpUserName" value="" />
  <variable name="smtpPassword" value="" />
  <variable name="smtpAuthentication" value="None" />
  <variable name="enableSsl" value="false" />
  <variable name="secureSocketOption" value="None" />
  <variable name="smtpPort" value="25" />
  <variable name="skipCertificateValidation" value="false" />
  <variable name="to" value="support@localhost.com" />
  <variable name="from" value="errors@lucid.com" />

  <extensions>
    <add assembly="NLog.MailKit"/>
  </extensions>

  <targets>

    <target  name="file" xsi:type="File" fileName="..\logs\mvc-${shortdate}.log"
      layout="${longdate}|${uppercase:${level}}|${aspnet-traceidentifier}|${logger}|${message} ${exception}"
      />

    <target name="mail" xsi:type="Mail"
      smtpServer="${smtpServer}"
      smtpUserName="${smtpUserName}"
      smtpPassword="${smtpPassword}"
      smtpAuthentication="${smtpAuthentication}"
      enableSsl="${enableSsl}"
      secureSocketOption="${secureSocketOption}"
      smtpPort="${smtpPort}"
      skipCertificateValidation="${skipCertificateValidation}"
      to="${to}"
      from="${from}"
      subject="Lucid errors"
      layout="${longdate}|${uppercase:${level}}|${aspnet-traceidentifier}|${logger}|${message} ${exception}"
      />

  </targets>

  <rules>
    <logger name="Microsoft.*" maxlevel="Info" final="true" />  <!-- BlackHole -->
    <logger name="*" minlevel="Trace" writeTo="file" />
    <logger name="*" minlevel="Error" writeTo="mail" />
  </rules>
</nlog>